(function(d,s){if(!String.prototype.Format){String.prototype.Format=function(){var result=this;if(arguments.length>0){for(var i=0;i<arguments.length;i++){if(arguments[i]==null)arguments[i]='';var reg=new RegExp("(\\{"+i+"\\})","g");result=result.replace(reg,arguments[i]);}}
return result;};}
if(!String.prototype.Compile){String.prototype.Compile=function(obj){return this.replace(/\{([\w ]+)\}/g,function($1,$2){return(obj!=null?obj[$2]:void 0)==undefined?"":obj[$2];});};}
var APIHOST=document.querySelector('meta[property="api:host"]').content+'/v/1.2';var v=function(a,b,t){t=t||d;t.addEventListener?t.addEventListener(a,b,!1):t.attachEvent&&t.attachEvent("on"+a,b)};var lfjax=function(method,url,options){var xhr=new XMLHttpRequest();options=options||{};xhr.open((method||'GET').toUpperCase(),APIHOST+url);if(method=='POST')xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.responseType='text';xhr.onload=function(){};xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE&&xhr.status===200){if(options.fn&&typeof options.fn=='function'){options.fn(xhr.responseText)}}};xhr.onerror=function(){};try{if(options.data){var _data=[];if(!options.data.push&&typeof options.data=='Object'){for(var x in options.data){_data.push(x+'='+options.data[x]);}
options.data=_data;}}else{options.data=[];}
xhr.send(encodeURI(options.data.join('&')));}catch(e){}};function eleParents(tar,selector){selector=selector||"div.con-tab";if(selector&&tar&&tar.nodeName!='HTML'){if(selector.indexOf('.')!=-1){var _sel=selector.split('.');if((!_sel[0]||tar.nodeName==_sel[0].toUpperCase())&&tar.classList.contains(_sel[1])){return tar;}else{return eleParents(tar.parentNode,selector);}}else if(selector.indexOf('#')!=-1){var _sel=selector.split('#');if((!_sel[0]||tar.nodeName==_sel[0].toUpperCase())&&tar.id==_sel[1]){return tar;}else{return eleParents(tar.parentNode,selector);}}else{var _sel=[selector];if(tar.nodeName==_sel[0].toUpperCase()){return tar;}else{return eleParents(tar.parentNode,selector);}}}else{return null;}}
function handleSubmit(evt){if(evt.target.nodeName=="BUTTON"&&evt.target.parentElement.classList.contains('form-button')){var pTar=evt.target.parentElement.parentElement.parentElement;var email=pTar.querySelector('input[name=email]').value.trim();var regEmail=/\w+([\w.-])*@[\w-]+\.\w+[.|\w]*/;if(regEmail.test(email)==false){swal('','Invalid email address','error');return false;}
if(pTar.classList.contains('form-subscribe')){lfjax('POST','/share/link/{linkid}/submit/subscribe/'.Compile({linkid:__data.bio.id}),{data:['email='+email,'name='+pTar.querySelector('input[name=fullname]').value,'title='+pTar.querySelector('.form-title span').innerHTML],fn:function(resp){resp=JSON.parse(resp||'{}');if(resp.code==0)pTar.querySelector('.form-thanks').style.display='block';}})}}}
var c=function(e){var _fbe=e.target||e.srcElement||{},_fte=e.target||e.srcElement||{},_tmpl=null;if(_fbe.href&&_fbe.nodeName=='A'){}else if(_fbe.nodeName=='IMG'||_fbe.nodeName=='SPAN'||_fbe.nodeName=='I'||_fbe.nodeName=='P'){_fbe=_fbe.parentElement;}else{}
if(_fbe.dataset.type==10&&_fbe.dataset.st){var _fc=d.querySelector('#form-tmpl-container');if(!_fc){_fc=d.createElement('div');_fc.id='form-tmpl-container';_fc.className='form-tmpl-container';d.body.appendChild(_fc);}
var _cssDom=d.querySelector('#lnk-form-tmpl');if(_fbe.dataset.path){if(!_cssDom){_cssDom=d.createElement('link');_cssDom.id='lnk-form-tmpl';_cssDom.rel='stylesheet';_cssDom.type='text/css';d.head.appendChild(_cssDom);}
_cssDom.href='/static/theme/tmpl/form/'+_fbe.dataset.path+'.css';}else{if(_cssDom)_cssDom.remove();}
var _style=d.querySelector('#style-form-tmpl'),_css='';if(_style)_style.remove();_style=d.createElement('style');_style.id='style-form-tmpl';_style.type='text/css';d.querySelector('head').appendChild(_style);var __form=JSON.parse(decodeURIComponent(_fbe.dataset.txt||'')||'{}');if(__form.color)_css+='--form-tmpl-color:'+__form.color+';';if(__form.radius)_css+='--form-tmpl-radius:calc(var(--form-tmpl-height-default) * '+__form.radius+' / 100);';if(__form.font)_css+='--form-tmpl-font:"'+__form.font+'";';_style.innerHTML=d.querySelector('#form-tmpl-css').innerHTML.Compile({css:_css});var tmpl=d.querySelector('#form-tmpl-'+_fbe.dataset.st);if(tmpl){_tmpl=_fc.querySelector('.form-tmpl');if(_fbe.dataset.kid==(_tmpl?_tmpl.dataset.kid:'')){_fc.style.display='block';_tmpl.classList.remove('animate__fadeOutDown');_tmpl.classList.add('animate__fadeInUp');return;}
_fc.innerHTML=d.querySelector('#form-tmpl-ct').innerHTML;_tmpl=_fc.querySelector('.form-tmpl');if(_fbe.dataset.st==7){var tmplOption=d.querySelector('#form-tmpl-7-option').innerHTML;__form.options='';(__form.services||[]).forEach(function(val,idx){__form.options+=tmplOption.Compile({text:val,idx:idx});});_tmpl.innerHTML+=tmpl.innerHTML.Compile(__form);}else{if(__form.services&&__form.services.length>0){__form.lis='';var tmplOption=d.querySelector('#form-tmpl-service-option').innerHTML;(__form.services||[]).forEach(function(val,idx){__form.lis+=tmplOption.Compile({text:val});});__form.serviceEncode=encodeURIComponent(__form.service||'');}
d.querySelector('.form-tmpl').innerHTML+=tmpl.innerHTML.Compile(__form);}
_fc.style.display='block';if(_fbe.dataset.st==6){var start={},end={};jeDate("#tmpl-form-date",{isinitVal:false,initDate:[{DD:"0"},true],festival:false,format:'YYYY-MM-DD',});d.querySelector('#tmpl-form-date').dataset.dateval=jeDate.nowDate();jeDate("#tmpl-form-time",{isinitVal:false,festival:false,format:'hh:mm:ss',});}}
return;}
if(_fbe.dataset.type<10&&_fbe.dataset.st==1){var _div=d.createElement('div'),_ep=eleParents(_fbe,'.btn-show');_div.className='embed-iframe';if(!_ep)_ep=d.querySelector('.container .center');if(_ep.querySelector('.embed-iframe')){_ep.querySelector('.embed-iframe').remove();return;}
var link=decodeURIComponent(_fbe.dataset.embed||'');if(link.indexOf('twitch.tv')!=-1)link+=('&parent='+location.host);if(link.indexOf('tiktok.com')!=-1)_div.className+=' embed-iframe-tiktok';_div.innerHTML='<iframe src="{link}" width="100%" height="100%" frameborder="0" allowfullscreen="true" scrolling="no" allow="accelerometer; autoplay;fullscreen;encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'.Compile({link:link});_ep.append(_div);return;}
if(_fbe.dataset.type<10&&_fbe.dataset.st==2){d.querySelector('.modal-block').style.display='block';d.querySelector('.modal-block .subs-title').innerHTML=decodeURIComponent(_fbe.dataset.embed);d.querySelector('.modal-block .subs-btn').dataset.kid=_fbe.dataset.kid;}};var c1=function(e){window.event?window.event.cancelBubble=true:e.stopPropagation();var _fbe=e.target||e.srcElement||{},_fte=e.target||e.srcElement||{},_tmpl=null;_fbe=_fbe.parentElement;if(_fte.nodeName=='I'&&_fte.classList.contains('icon-close')){_tmpl=d.querySelector('.form-tmpl');if(_tmpl){_tmpl.classList.remove('animate__fadeInUp');_tmpl.classList.add('animate__fadeOutDown');setTimeout(function(){d.querySelector('#form-tmpl-container').style.display='none';},500);if(d.querySelector('.form-tmpl .service-options'))d.querySelector('.form-tmpl .service-options').style.display='none';}
return;}
if(_fte.nodeName=='BUTTON'&&_fbe.classList.contains('form-button')){handleSubmit(e);return;}};var c2=function(e){d.querySelector('.modal-block').style.display='none';d.querySelector('.modal-block .subs-title').innerHTML='';d.querySelector('.modal-block .info').style.display='block';d.querySelector('.modal-block .success').style.display='none';d.querySelector('.modal-block .subs-btn').style.display='inline-block';};var c3=function(){var w=window.innerWidth>=700?700:window.innerWidth;var h=window.innerHeight>=800?800:window.innerHeight;var kid=d.querySelector('.modal-block .subs-btn').dataset.kid;if(kid)window.open('https://api.linkfly.to/v/1.8/plat/youtube/auth/lnk/{0}/?id={1}'.Format(__data.bio.id,kid),'YoutubeAuth'+new Date().getTime(),"resizable,scrollbars,status,width={0},height={1}".Format(w,h));};v("click",c,d.querySelector('.container'));v("click",c1,d.querySelector('#form-tmpl-container'));v("click",c2,d.querySelector('.modal-block .modal-close'));v("click",c3,d.querySelector('.modal-block .subs-btn'));}(document,'script'));